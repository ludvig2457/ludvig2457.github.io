<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>LudvigEditor</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
/* ===== ROOT ===== */
html, body {
    margin: 0;
    height: 100%;
    overflow: hidden;
    background: radial-gradient(circle at top, #4b2fbf, #15162e);
    font-family: system-ui, -apple-system, BlinkMacSystemFont;
}

/* ===== TOP BAR ===== */
#topbar {
    height: 46px;
    display: flex;
    align-items: center;
    padding: 0 14px;
    color: #fff;
    font-size: 14px;
    letter-spacing: .3px;

    backdrop-filter: blur(18px) saturate(140%);
    background: rgba(30, 30, 60, 0.45);
    border-bottom: 1px solid rgba(255,255,255,.08);
    box-shadow: 0 6px 30px rgba(0,0,0,.45);
}

#title {
    font-weight: 600;
}

/* ===== EDITOR ===== */
#editor {
    width: 100%;
    height: calc(100% - 46px);
}

/* ===== SCROLLBAR ===== */
::-webkit-scrollbar {
    width: 10px;
    height: 10px;
}
::-webkit-scrollbar-thumb {
    background: rgba(120,120,200,.35);
    border-radius: 10px;
}
::-webkit-scrollbar-track {
    background: transparent;
}
</style>

<!-- Monaco Loader -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.45.0/min/vs/loader.min.js"></script>
</head>

<body>

<div id="topbar">
    âš¡ <span id="title">LudvigEditor</span>&nbsp;â€” VS Code style
</div>

<div id="editor"></div>

<script>
/* ================= MONACO ================= */
require.config({
    paths: {
        vs: "https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.45.0/min/vs"
    }
});

require(["vs/editor/editor.main"], function () {

    /* ===== THEME (VS CODE+) ===== */
    monaco.editor.defineTheme("ludvig-dark", {
        base: "vs-dark",
        inherit: true,
        rules: [
            { token: "comment", foreground: "6A9955" },
            { token: "keyword", foreground: "C586C0" },
            { token: "number", foreground: "B5CEA8" },
            { token: "string", foreground: "CE9178" },
            { token: "type.identifier", foreground: "4EC9B0" },
            { token: "identifier", foreground: "D4D4D4" },
            { token: "delimiter", foreground: "D4D4D4" },
            { token: "keyword.import", foreground: "569CD6" },
            { token: "function", foreground: "DCDCAA" }
        ],
        colors: {
            "editor.background": "#0f1224",
            "editor.lineHighlightBackground": "#1b1f3a",
            "editorCursor.foreground": "#AEAFAD",
            "editor.selectionBackground": "#264F78",
            "editor.inactiveSelectionBackground": "#3A3D41",
        }
    });

    /* ===== EDITOR ===== */
    window.editor = monaco.editor.create(
        document.getElementById("editor"),
        {
            value:
`# LudvigEditor
# VS Code-style editor
# PyQt6 â€¢ Python â€¢ Future ðŸš€

print("Hello, Ludvig!")`,
            language: "python",
            theme: "ludvig-dark",
            automaticLayout: true,

            fontFamily: "JetBrains Mono, Consolas, monospace",
            fontSize: 14,
            fontLigatures: true,

            smoothScrolling: true,
            cursorSmoothCaretAnimation: "on",

            minimap: { enabled: true },
            wordWrap: "on",

            bracketPairColorization: { enabled: true },
            guides: {
                indentation: true,
                bracketPairs: true
            }
        }
    );

    /* ===== AUTOSAVE ===== */
    const AUTOSAVE_KEY = "ludvig_autosave";

    setInterval(() => {
        localStorage.setItem(AUTOSAVE_KEY, editor.getValue());
    }, 5000);

    const saved = localStorage.getItem(AUTOSAVE_KEY);
    if (saved) editor.setValue(saved);

    /* ===== PYQT API ===== */
    window.setCode = (code, lang = "python") => {
        const model = editor.getModel();
        monaco.editor.setModelLanguage(model, lang);
        editor.setValue(code);
    };

    window.getCode = () => editor.getValue();

});
</script>

</body>
</html>
