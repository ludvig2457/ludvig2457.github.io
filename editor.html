<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>LudvigEditor</title>

<style>
html, body {
    margin: 0;
    height: 100%;
    background: radial-gradient(circle at top, #3f2b96, #1a1b3a);
    font-family: system-ui;
}

#topbar {
    height: 42px;
    display: flex;
    align-items: center;
    padding: 0 12px;
    color: #fff;
    backdrop-filter: blur(16px);
    background: rgba(40, 40, 80, 0.45);
    box-shadow: 0 4px 20px rgba(0,0,0,.4);
}

#editor {
    width: 100%;
    height: calc(100% - 42px);
}
</style>

<script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.45.0/min/vs/loader.min.js"></script>
</head>

<body>

<div id="topbar">âš¡ LudvigEditor â€” VS Code style</div>
<div id="editor"></div>

<script>
require.config({
    paths: {
        vs: "https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.45.0/min/vs"
    }
});

require(["vs/editor/editor.main"], function () {

    window.editor = monaco.editor.create(document.getElementById("editor"), {
        value: "# LudvigEditor\nprint('Hello, future ðŸš€')",
        language: "python",
        theme: "vs-dark",
        automaticLayout: true,
        smoothScrolling: true,
        fontLigatures: true,
        fontFamily: "JetBrains Mono, Consolas",
        minimap: { enabled: true },
        cursorSmoothCaretAnimation: "on",
        wordWrap: "on"
    });

    // -------- AUTOSAVE --------
    setInterval(() => {
        const code = editor.getValue();
        window.localStorage.setItem("autosave", code);
    }, 5000);

    const saved = localStorage.getItem("autosave");
    if (saved) editor.setValue(saved);

    // -------- API FOR PYQT --------
    window.setCode = (code, lang="python") => {
        monaco.editor.setModelLanguage(editor.getModel(), lang);
        editor.setValue(code);
    };

    window.getCode = () => editor.getValue();
});
</script>

</body>
</html>
